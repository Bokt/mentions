{"version":3,"sources":["webpack://@flarum/mentions/webpack/bootstrap","webpack://@flarum/mentions/./forum.js","webpack://@flarum/mentions/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@flarum/mentions/./node_modules/textarea-caret/index.js","webpack://@flarum/mentions/./src/forum/addComposerAutocomplete.js","webpack://@flarum/mentions/./src/forum/addMentionedByList.js","webpack://@flarum/mentions/./src/forum/addPostMentionPreviews.js","webpack://@flarum/mentions/./src/forum/addPostQuoteButton.js","webpack://@flarum/mentions/./src/forum/addPostReplyAction.js","webpack://@flarum/mentions/./src/forum/components/AutocompleteDropdown.js","webpack://@flarum/mentions/./src/forum/components/MentionsUserPage.js","webpack://@flarum/mentions/./src/forum/components/PostMentionedNotification.js","webpack://@flarum/mentions/./src/forum/components/PostQuoteButton.js","webpack://@flarum/mentions/./src/forum/components/UserMentionedNotification.js","webpack://@flarum/mentions/./src/forum/index.js","webpack://@flarum/mentions/./src/forum/utils/reply.js","webpack://@flarum/mentions/./src/forum/utils/selectedText.js","webpack://@flarum/mentions/./src/forum/utils/textFormatter.js","webpack://@flarum/mentions/external \"flarum.core.compat['Component']\"","webpack://@flarum/mentions/external \"flarum.core.compat['Model']\"","webpack://@flarum/mentions/external \"flarum.core.compat['app']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/Button']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/CommentPost']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/ComposerBody']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/LinkButton']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/LoadingIndicator']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/Notification']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/NotificationGrid']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/PostPreview']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/PostsUserPage']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/TextEditor']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/TextEditorButton']\"","webpack://@flarum/mentions/external \"flarum.core.compat['components/UserPage']\"","webpack://@flarum/mentions/external \"flarum.core.compat['extend']\"","webpack://@flarum/mentions/external \"flarum.core.compat['helpers/avatar']\"","webpack://@flarum/mentions/external \"flarum.core.compat['helpers/highlight']\"","webpack://@flarum/mentions/external \"flarum.core.compat['helpers/icon']\"","webpack://@flarum/mentions/external \"flarum.core.compat['helpers/punctuateSeries']\"","webpack://@flarum/mentions/external \"flarum.core.compat['helpers/username']\"","webpack://@flarum/mentions/external \"flarum.core.compat['models/Post']\"","webpack://@flarum/mentions/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@flarum/mentions/external \"flarum.core.compat['utils/KeyboardNavigatable']\"","webpack://@flarum/mentions/external \"flarum.core.compat['utils/extract']\"","webpack://@flarum/mentions/external \"flarum.core.compat['utils/extractText']\"","webpack://@flarum/mentions/external \"flarum.core.compat['utils/string']\""],"names":["addComposerAutocomplete","extend","ComposerBody","prototype","original","isInitialized","composer","$container","$","dropdown","AutocompleteDropdown","items","$textarea","wrap","searched","mentionStart","typed","searchTimeout","applySuggestion","replacement","insert","index","length","content","editor","setValue","substring","substr","selectionStart","setSelectionRange","hide","navigator","KeyboardNavigatable","when","active","onUp","navigate","onDown","onSelect","complete","bind","onCancel","bindTo","after","on","e","indexOf","which","cursor","selectionEnd","value","i","character","toLowerCase","makeSuggestion","user","className","username","usernameHelper","children","highlight","setIndex","parent","avatar","userMatches","names","displayName","some","buildSuggestions","suggestions","app","store","all","forEach","push","composerPost","props","post","discussion","posts","filter","contentType","number","sort","a","b","createdAt","splice","id","translator","trans","truncate","contentPlain","m","render","show","coordinates","getCaretCoordinates","width","outerWidth","height","outerHeight","offsetParent","left","top","scrollTop","clearTimeout","setTimeout","typedLower","find","q","page","limit","then","TextEditor","add","insertAtCursor","addMentionedByList","Post","mentionedBy","Model","hasMany","CommentPost","replies","hidePreview","removeClass","one","config","element","$this","timeout","$preview","append","hover","hasClass","is","map","reply","PostPreview","component","onclick","off","addClass","data","users","repliers","session","overLimit","slice","route","count","transChoice","icon","punctuateSeries","addPostMentionPreviews","contentHtml","oldPostContentHtml","isEditing","parentPost","$parentPost","each","call","attrs","href","getAttribute","getPostElement","showPreview","$post","visible","offset","window","pageYOffset","positionPreview","previewHeight","css","showPost","title","getById","LoadingIndicator","preventDefault","stopPropagation","document","addPostQuoteButton","isHidden","canReply","$postBody","handler","selectedText","button","PostQuoteButton","rects","getSelection","getRangeAt","getClientRects","firstRect","clientY","bottom","clientX","right","showStart","lastRect","showEnd","addEventListener","Button","init","keyWasJustPressed","view","item","delta","keyWasJustPressedTimeout","eq","click","scrollToItem","$dropdown","$items","rangedIndex","$item","dropdownScroll","dropdownTop","dropdownBottom","itemTop","itemBottom","parseInt","stop","animate","Component","MentionsUserPage","loadResults","type","mentioned","loadLimit","PostsUserPage","PostMentionedNotification","notification","subject","replyNumber","fromUser","excerpt","Notification","extract","onmousedown","parentOffset","UserMentionedNotification","initializers","addPostReplyAction","notificationComponents","postMentioned","userMentioned","NotificationGrid","name","label","routes","path","UserPage","LinkButton","getPlainContent","removeSelectors","insertMention","quote","mention","originalContent","cursorPosition","getSelectionRange","preceding","precedingNewlines","match","Array","join","trim","replace","DiscussionControls","replyAction","newComponent","body","selection","rangeCount","range","commonAncestorContainer","contains","clone","cloneContents","replaceWith","alt","src","innerText","text","filterUserMentions","tag","getBy","setAttribute","extractText","filterPostMentions"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;;AClFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;ACAA;AAAA;AAAe;AACf;AACA;AACA;AACA,C;;;;;;;;;;;ACJA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mGAAmG;AACnG;;AAEA;AACA;AACA;AACA,kCAAkC;;AAElC;AACA,8BAA8B;AAC9B;AACA,gCAAgC;;AAEhC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;AACH,8BAA8B,0CAA0C;AACxE;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA,IAAI,KAA4B;AAChC;AACA,CAAC;AACD;AACA;;AAEA,CAAC;;;;;;;;;;;;;ACzID;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEe,SAASA,uBAAT,GAAmC;AAChDC,8DAAM,CAACC,qEAAY,CAACC,SAAd,EAAyB,QAAzB,EAAmC,UAASC,QAAT,EAAmBC,aAAnB,EAAkC;AACzE,QAAIA,aAAJ,EAAmB;AAEnB,QAAMC,QAAQ,GAAG,IAAjB;AACA,QAAMC,UAAU,GAAGC,CAAC,CAAC,4DAAD,CAApB;AACA,QAAMC,QAAQ,GAAG,IAAIC,yEAAJ,CAAyB;AAACC,WAAK,EAAE;AAAR,KAAzB,CAAjB;AACA,QAAMC,SAAS,GAAG,KAAKJ,CAAL,CAAO,UAAP,EAAmBK,IAAnB,CAAwB,kDAAxB,CAAlB;AACA,QAAMC,QAAQ,GAAG,EAAjB;AACA,QAAIC,YAAJ;AACA,QAAIC,KAAJ;AACA,QAAIC,aAAJ;;AAEA,QAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAASC,WAAT,EAAsB;AAC5C,UAAMC,MAAM,GAAGD,WAAW,GAAG,GAA7B,CAD4C,CAG5C;;AACA,UAAME,KAAK,GAAGN,YAAY,GAAG,CAAf,GAAmBK,MAAM,CAACE,MAAxC;AAEA,UAAMC,OAAO,GAAGjB,QAAQ,CAACiB,OAAT,EAAhB;AACAjB,cAAQ,CAACkB,MAAT,CAAgBC,QAAhB,CAAyBF,OAAO,CAACG,SAAR,CAAkB,CAAlB,EAAqBX,YAAY,GAAG,CAApC,IAAyCK,MAAzC,GAAkDG,OAAO,CAACI,MAAR,CAAef,SAAS,CAAC,CAAD,CAAT,CAAagB,cAA5B,CAA3E;AAEAtB,cAAQ,CAACkB,MAAT,CAAgBK,iBAAhB,CAAkCR,KAAlC,EAAyCA,KAAzC;AAEAZ,cAAQ,CAACqB,IAAT;AACD,KAZD;;AAcA,SAAKC,SAAL,GAAiB,IAAIC,uEAAJ,EAAjB;AACA,SAAKD,SAAL,CACGE,IADH,CACQ;AAAA,aAAMxB,QAAQ,CAACyB,MAAf;AAAA,KADR,EAEGC,IAFH,CAEQ;AAAA,aAAM1B,QAAQ,CAAC2B,QAAT,CAAkB,CAAC,CAAnB,CAAN;AAAA,KAFR,EAGGC,MAHH,CAGU;AAAA,aAAM5B,QAAQ,CAAC2B,QAAT,CAAkB,CAAlB,CAAN;AAAA,KAHV,EAIGE,QAJH,CAIY7B,QAAQ,CAAC8B,QAAT,CAAkBC,IAAlB,CAAuB/B,QAAvB,CAJZ,EAKGgC,QALH,CAKYhC,QAAQ,CAACqB,IAAT,CAAcU,IAAd,CAAmB/B,QAAnB,CALZ,EAMGiC,MANH,CAMU9B,SANV;AAQAA,aAAS,CACN+B,KADH,CACSpC,UADT,EAEGqC,EAFH,CAEM,mBAFN,EAE2B,UAASC,CAAT,EAAY;AAAA;;AACnC;AACA,UAAI,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,EAAgB,EAAhB,EAAoB,EAApB,EAAwB,EAAxB,EAA4BC,OAA5B,CAAoCD,CAAC,CAACE,KAAtC,MAAiD,CAAC,CAAtD,EAAyD;AAEzD,UAAMC,MAAM,GAAG,KAAKpB,cAApB;AAEA,UAAI,KAAKqB,YAAL,GAAoBD,MAApB,GAA6B,CAAjC,EAAoC,OAND,CAQnC;AACA;;AACA,UAAME,KAAK,GAAG,KAAKA,KAAnB;AACAnC,kBAAY,GAAG,CAAf;;AACA,WAAK,IAAIoC,CAAC,GAAGH,MAAM,GAAG,CAAtB,EAAyBG,CAAC,IAAIH,MAAM,GAAG,EAAvC,EAA2CG,CAAC,EAA5C,EAAgD;AAC9C,YAAMC,SAAS,GAAGF,KAAK,CAACvB,MAAN,CAAawB,CAAb,EAAgB,CAAhB,CAAlB;;AACA,YAAIC,SAAS,KAAK,GAAlB,EAAuB;AACrBrC,sBAAY,GAAGoC,CAAC,GAAG,CAAnB;AACA;AACD;AACF;;AAED1C,cAAQ,CAACqB,IAAT;AACArB,cAAQ,CAACyB,MAAT,GAAkB,KAAlB;;AAEA,UAAInB,YAAJ,EAAkB;AAChBC,aAAK,GAAGkC,KAAK,CAACxB,SAAN,CAAgBX,YAAhB,EAA8BiC,MAA9B,EAAsCK,WAAtC,EAAR;;AAEA,YAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAASC,IAAT,EAAepC,WAAf,EAA4BI,OAA5B,EAAqCiC,SAArC,EAAqD;AAAA,cAAhBA,SAAgB;AAAhBA,qBAAgB,GAAJ,EAAI;AAAA;;AAC1E,cAAMC,QAAQ,GAAGC,8DAAc,CAACH,IAAD,CAA/B;;AACA,cAAIvC,KAAJ,EAAW;AACTyC,oBAAQ,CAACE,QAAT,CAAkB,CAAlB,IAAuBC,+DAAS,CAACH,QAAQ,CAACE,QAAT,CAAkB,CAAlB,CAAD,EAAuB3C,KAAvB,CAAhC;AACD;;AAED,iBACE;AAAQ,qBAAS,EAAE,iBAAiBwC,SAApC;AACE,mBAAO,EAAE;AAAA,qBAAMtC,eAAe,CAACC,WAAD,CAArB;AAAA,aADX;AAEE,wBAAY,EAAE,wBAAW;AACvBV,sBAAQ,CAACoD,QAAT,CAAkBrD,CAAC,CAAC,IAAD,CAAD,CAAQsD,MAAR,GAAiBzC,KAAjB,EAAlB;AACD;AAJH,aAKE;AAAM,qBAAS,EAAC;AAAhB,aACG0C,4DAAM,CAACR,IAAD,CADT,EAEGE,QAFH,OAEc,GAFd,EAGGlC,OAHH,CALF,CADF;AAaD,SAnBD;;AAqBA,YAAMyC,WAAW,GAAG,SAAdA,WAAc,CAAST,IAAT,EAAe;AACjC,cAAMU,KAAK,GAAG,CACZV,IAAI,CAACE,QAAL,EADY,EAEZF,IAAI,CAACW,WAAL,EAFY,CAAd;AAKA,iBAAOD,KAAK,CAACE,IAAN,CAAW,UAAAjB,KAAK;AAAA,mBAAIA,KAAK,CAACG,WAAN,GAAoB1B,MAApB,CAA2B,CAA3B,EAA8BX,KAAK,CAACM,MAApC,MAAgDN,KAApD;AAAA,WAAhB,CAAP;AACD,SAPD;;AASA,YAAMoD,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B,cAAMC,WAAW,GAAG,EAApB,CAD6B,CAG7B;AACA;;AACA,cAAIrD,KAAJ,EAAW;AACTsD,eAAG,CAACC,KAAJ,CAAUC,GAAV,CAAc,OAAd,EAAuBC,OAAvB,CAA+B,UAAAlB,IAAI,EAAI;AACrC,kBAAI,CAACS,WAAW,CAACT,IAAD,CAAhB,EAAwB;AAExBc,yBAAW,CAACK,IAAZ,CACEpB,cAAc,CAACC,IAAD,EAAO,MAAMA,IAAI,CAACE,QAAL,EAAb,EAA8B,EAA9B,EAAkC,uBAAlC,CADhB;AAGD,aAND;AAOD,WAb4B,CAe7B;AACA;AACA;AACA;;;AACA,cAAMkB,YAAY,GAAGrE,QAAQ,CAACsE,KAAT,CAAeC,IAApC;AACA,cAAMC,UAAU,GAAIH,YAAY,IAAIA,YAAY,CAACG,UAAb,EAAjB,IAA+CxE,QAAQ,CAACsE,KAAT,CAAeE,UAAjF;;AACA,cAAIA,UAAJ,EAAgB;AACdA,sBAAU,CAACC,KAAX,GACGC,MADH,CACU,UAAAH,IAAI;AAAA,qBAAIA,IAAI,IAAIA,IAAI,CAACI,WAAL,OAAuB,SAA/B,KAA6C,CAACN,YAAD,IAAiBE,IAAI,CAACK,MAAL,KAAgBP,YAAY,CAACO,MAAb,EAA9E,CAAJ;AAAA,aADd,EAEGC,IAFH,CAEQ,UAACC,CAAD,EAAIC,CAAJ;AAAA,qBAAUA,CAAC,CAACC,SAAF,KAAgBF,CAAC,CAACE,SAAF,EAA1B;AAAA,aAFR,EAGGN,MAHH,CAGU,UAAAH,IAAI,EAAI;AACd,kBAAMtB,IAAI,GAAGsB,IAAI,CAACtB,IAAL,EAAb;AACA,qBAAOA,IAAI,IAAIS,WAAW,CAACT,IAAD,CAA1B;AACD,aANH,EAOGgC,MAPH,CAOU,CAPV,EAOa,CAPb,EAQGd,OARH,CAQW,UAAAI,IAAI,EAAI;AACf,kBAAMtB,IAAI,GAAGsB,IAAI,CAACtB,IAAL,EAAb;AACAc,yBAAW,CAACK,IAAZ,CACEpB,cAAc,CAACC,IAAD,EAAO,MAAMA,IAAI,CAACE,QAAL,EAAN,GAAwB,GAAxB,GAA8BoB,IAAI,CAACW,EAAL,EAArC,EAAgD,CAC5DlB,GAAG,CAACmB,UAAJ,CAAeC,KAAf,CAAqB,mDAArB,EAA0E;AAACR,sBAAM,EAAEL,IAAI,CAACK,MAAL;AAAT,eAA1E,CAD4D,EACwC,KADxC,EAE5DS,oEAAQ,CAACd,IAAI,CAACe,YAAL,EAAD,EAAsB,GAAtB,CAFoD,CAAhD,EAGX,uBAHW,CADhB;AAMD,aAhBH;AAiBD;;AAED,cAAIvB,WAAW,CAAC/C,MAAhB,EAAwB;AACtBb,oBAAQ,CAACmE,KAAT,CAAejE,KAAf,GAAuB0D,WAAvB;AACAwB,aAAC,CAACC,MAAF,CAASvF,UAAU,CAAC,CAAD,CAAnB,EAAwBE,QAAQ,CAACqF,MAAT,EAAxB;AAEArF,oBAAQ,CAACsF,IAAT;AACA,gBAAMC,WAAW,GAAGC,qDAAmB,CAAC,KAAD,EAAOlF,YAAP,CAAvC;AACA,gBAAMmF,KAAK,GAAGzF,QAAQ,CAACD,CAAT,GAAa2F,UAAb,EAAd;AACA,gBAAMC,MAAM,GAAG3F,QAAQ,CAACD,CAAT,GAAa6F,WAAb,EAAf;AACA,gBAAMvC,MAAM,GAAGrD,QAAQ,CAACD,CAAT,GAAa8F,YAAb,EAAf;AACA,gBAAIC,IAAI,GAAGP,WAAW,CAACO,IAAvB;AACA,gBAAIC,GAAG,GAAGR,WAAW,CAACQ,GAAZ,GAAkB,KAAI,CAACC,SAAvB,GAAmC,EAA7C;;AACA,gBAAID,GAAG,GAAGJ,MAAN,GAAetC,MAAM,CAACsC,MAAP,EAAnB,EAAoC;AAClCI,iBAAG,GAAGR,WAAW,CAACQ,GAAZ,GAAkB,KAAI,CAACC,SAAvB,GAAmCL,MAAnC,GAA4C,EAAlD;AACD;;AACD,gBAAIG,IAAI,GAAGL,KAAP,GAAepC,MAAM,CAACoC,KAAP,EAAnB,EAAmC;AACjCK,kBAAI,GAAGzC,MAAM,CAACoC,KAAP,KAAiBA,KAAxB;AACD;;AACDzF,oBAAQ,CAACsF,IAAT,CAAcQ,IAAd,EAAoBC,GAApB;AACD,WAlBD,MAkBO;AACL/F,oBAAQ,CAACyB,MAAT,GAAkB,KAAlB;AACAzB,oBAAQ,CAACqB,IAAT;AACD;AACF,SA/DD;;AAiEArB,gBAAQ,CAACyB,MAAT,GAAkB,IAAlB;AAEAkC,wBAAgB;AAEhB3D,gBAAQ,CAACoD,QAAT,CAAkB,CAAlB;AACApD,gBAAQ,CAACD,CAAT,GAAaiG,SAAb,CAAuB,CAAvB;AAEAC,oBAAY,CAACzF,aAAD,CAAZ;;AACA,YAAID,KAAJ,EAAW;AACTC,uBAAa,GAAG0F,UAAU,CAAC,YAAW;AACpC,gBAAMC,UAAU,GAAG5F,KAAK,CAACqC,WAAN,EAAnB;;AACA,gBAAIvC,QAAQ,CAACgC,OAAT,CAAiB8D,UAAjB,MAAiC,CAAC,CAAtC,EAAyC;AACvCtC,iBAAG,CAACC,KAAJ,CAAUsC,IAAV,CAAe,OAAf,EAAwB;AAAC7B,sBAAM,EAAE;AAAC8B,mBAAC,EAAE9F;AAAJ,iBAAT;AAAqB+F,oBAAI,EAAE;AAACC,uBAAK,EAAE;AAAR;AAA3B,eAAxB,EAAgEC,IAAhE,CAAqE,YAAM;AACzE,oBAAIxG,QAAQ,CAACyB,MAAb,EAAqBkC,gBAAgB;AACtC,eAFD;AAGAtD,sBAAQ,CAAC4D,IAAT,CAAckC,UAAd;AACD;AACF,WARyB,EAQvB,GARuB,CAA1B;AASD;AACF;AACF,KA/IH;AAgJD,GAnLK,CAAN;AAqLA3G,8DAAM,CAACiH,mEAAU,CAAC/G,SAAZ,EAAuB,cAAvB,EAAuC,UAASQ,KAAT,EAAgB;AAAA;;AAC3DA,SAAK,CAACwG,GAAN,CAAU,SAAV,EACE,EAAC,yEAAD;AAAkB,aAAO,EAAE;AAAA,eAAM,MAAI,CAACC,cAAL,CAAoB,GAApB,CAAN;AAAA,OAA3B;AAA2D,UAAI,EAAC;AAAhE,OACG9C,GAAG,CAACmB,UAAJ,CAAeC,KAAf,CAAqB,gDAArB,CADH,CADF;AAKD,GANK,CAAN;AAOD,C;;;;;;;;;;;;AC3MD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEe,SAAS2B,kBAAT,GAA8B;AAC3CC,2DAAI,CAACnH,SAAL,CAAeoH,WAAf,GAA6BC,mDAAK,CAACC,OAAN,CAAc,aAAd,CAA7B;AAEAxH,8DAAM,CAACyH,oEAAW,CAACvH,SAAb,EAAwB,aAAxB,EAAuC,UAASQ,KAAT,EAAgB;AAAA;;AAC3D,QAAMkE,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAxB;AACA,QAAM8C,OAAO,GAAG9C,IAAI,CAAC0C,WAAL,EAAhB;;AAEA,QAAII,OAAO,IAAIA,OAAO,CAACrG,MAAvB,EAA+B;AAC7B;AACA;AACA,UAAIqG,OAAO,CAACrG,MAAR,KAAmB,CAAnB,IAAwBqG,OAAO,CAAC,CAAD,CAAP,CAAWzC,MAAX,OAAwBL,IAAI,CAACK,MAAL,KAAgB,CAApE,EAAuE;AACrE;AACD;;AAED,UAAM0C,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB,aAAI,CAACpH,CAAL,CAAO,2BAAP,EACGqH,WADH,CACe,IADf,EAEGC,GAFH,CAEO,eAFP,EAEwB,YAAW;AAAEtH,WAAC,CAAC,IAAD,CAAD,CAAQsB,IAAR;AAAiB,SAFtD;AAGD,OAJD;;AAMA,UAAMiG,MAAM,GAAG,SAATA,MAAS,CAASC,OAAT,EAAkB3H,aAAlB,EAAiC;AAC9C,YAAIA,aAAJ,EAAmB;AAEnB,YAAM4H,KAAK,GAAGzH,CAAC,CAACwH,OAAD,CAAf;AACA,YAAIE,OAAJ;AAEA,YAAMC,QAAQ,GAAG3H,CAAC,CAAC,2DAAD,CAAlB;AACAyH,aAAK,CAACG,MAAN,CAAaD,QAAb;AAEAF,aAAK,CAACtE,QAAN,GAAiB0E,KAAjB,CAAuB,YAAW;AAChC3B,sBAAY,CAACwB,OAAD,CAAZ;AACAA,iBAAO,GAAGvB,UAAU,CAAC,YAAW;AAC9B,gBAAI,CAACwB,QAAQ,CAACG,QAAT,CAAkB,IAAlB,CAAD,IAA4BH,QAAQ,CAACI,EAAT,CAAY,UAAZ,CAAhC,EAAyD,OAD3B,CAG9B;AACA;AACA;;AACA1C,aAAC,CAACC,MAAF,CAASqC,QAAQ,CAAC,CAAD,CAAjB,EAAsBR,OAAO,CAACa,GAAR,CAAY,UAAAC,KAAK;AAAA,qBACrC;AAAI,+BAAaA,KAAK,CAACvD,MAAN;AAAjB,iBACGwD,oEAAW,CAACC,SAAZ,CAAsB;AACrB9D,oBAAI,EAAE4D,KADe;AAErBG,uBAAO,EAAEhB;AAFY,eAAtB,CADH,CADqC;AAAA,aAAjB,CAAtB;AAQAO,oBAAQ,CAACpC,IAAT;AACAY,sBAAU,CAAC;AAAA,qBAAMwB,QAAQ,CAACU,GAAT,CAAa,eAAb,EAA8BC,QAA9B,CAAuC,IAAvC,CAAN;AAAA,aAAD,CAAV;AACD,WAhBmB,EAgBjB,GAhBiB,CAApB;AAiBD,SAnBD,EAmBG,YAAW;AACZpC,sBAAY,CAACwB,OAAD,CAAZ;AACAA,iBAAO,GAAGvB,UAAU,CAACiB,WAAD,EAAc,GAAd,CAApB;AACD,SAtBD,EAT8C,CAiC9C;AACA;AACA;;AACAK,aAAK,CAACpB,IAAN,CAAW,6BAAX,EAA0CwB,KAA1C,CAAgD,YAAW;AACzDF,kBAAQ,CAACtB,IAAT,CAAc,mBAAmBrG,CAAC,CAAC,IAAD,CAAD,CAAQuI,IAAR,CAAa,QAAb,CAAnB,GAA4C,IAA1D,EAAgED,QAAhE,CAAyE,QAAzE;AACD,SAFD,EAEG,YAAW;AACZX,kBAAQ,CAACtB,IAAT,CAAc,eAAd,EAA+BgB,WAA/B,CAA2C,QAA3C;AACD,SAJD;AAKD,OAzCD;;AA2CA,UAAMmB,KAAK,GAAG,EAAd;AACA,UAAMC,QAAQ,GAAGtB,OAAO,CACrBxC,IADc,CACT,UAAAsD,KAAK;AAAA,eAAIA,KAAK,CAAClF,IAAN,OAAiBe,GAAG,CAAC4E,OAAJ,CAAY3F,IAA7B,GAAoC,CAAC,CAArC,GAAyC,CAA7C;AAAA,OADI,EAEdyB,MAFc,CAEP,UAAAyD,KAAK,EAAI;AACf,YAAMlF,IAAI,GAAGkF,KAAK,CAAClF,IAAN,EAAb;;AACA,YAAIyF,KAAK,CAAClG,OAAN,CAAcS,IAAd,MAAwB,CAAC,CAA7B,EAAgC;AAC9ByF,eAAK,CAACtE,IAAN,CAAWnB,IAAX;AACA,iBAAO,IAAP;AACD;AACF,OARc,CAAjB;AAUA,UAAMyD,KAAK,GAAG,CAAd;AACA,UAAMmC,SAAS,GAAGF,QAAQ,CAAC3H,MAAT,GAAkB0F,KAApC,CApE6B,CAsE7B;AACA;;AACA,UAAM/C,KAAK,GAAGgF,QAAQ,CACnBG,KADW,CACL,CADK,EACFD,SAAS,GAAGnC,KAAK,GAAG,CAAX,GAAeA,KADtB,EAEXwB,GAFW,CAEP,UAAAC,KAAK,EAAI;AACZ,YAAMlF,IAAI,GAAGkF,KAAK,CAAClF,IAAN,EAAb;AAEA,eACE;AAAG,cAAI,EAAEe,GAAG,CAAC+E,KAAJ,CAAUxE,IAAV,CAAe4D,KAAf,CAAT;AACG,gBAAM,EAAE5C,CAAC,CAACwD,KADb;AAEG,iBAAO,EAAEzB,WAFZ;AAGG,yBAAaa,KAAK,CAACvD,MAAN;AAHhB,WAIGZ,GAAG,CAAC4E,OAAJ,CAAY3F,IAAZ,KAAqBA,IAArB,GAA4Be,GAAG,CAACmB,UAAJ,CAAeC,KAAf,CAAqB,qCAArB,CAA5B,GAA0FjC,8DAAQ,CAACF,IAAD,CAJrG,CADF;AAQD,OAbW,CAAd,CAxE6B,CAuF7B;AACA;AACA;;AACA,UAAI4F,SAAJ,EAAe;AACb,YAAMG,KAAK,GAAGL,QAAQ,CAAC3H,MAAT,GAAkB2C,KAAK,CAAC3C,MAAtC;AAEA2C,aAAK,CAACS,IAAN,CACEJ,GAAG,CAACmB,UAAJ,CAAe8D,WAAf,CAA2B,wCAA3B,EAAqED,KAArE,EAA4E;AAACA,eAAK,EAALA;AAAD,SAA5E,CADF;AAGD;;AAED3I,WAAK,CAACwG,GAAN,CAAU,SAAV,EACE;AAAK,iBAAS,EAAC,kBAAf;AAAkC,cAAM,EAAEY;AAA1C,SACE;AAAM,iBAAS,EAAC;AAAhB,SACGyB,0DAAI,CAAC,cAAD,CADP,EAEGlF,GAAG,CAACmB,UAAJ,CAAe8D,WAAf,CAA2B,6CAA6CN,QAAQ,CAAC,CAAD,CAAR,CAAY1F,IAAZ,OAAuBe,GAAG,CAAC4E,OAAJ,CAAY3F,IAAnC,GAA0C,OAA1C,GAAoD,EAAjG,IAAuG,OAAlI,EAA2IU,KAAK,CAAC3C,MAAjJ,EAAyJ;AACxJgI,aAAK,EAAErF,KAAK,CAAC3C,MAD2I;AAExJ0H,aAAK,EAAES,qEAAe,CAACxF,KAAD;AAFkI,OAAzJ,CAFH,CADF,CADF;AAWD;AACF,GAlHK,CAAN;AAmHD,C;;;;;;;;;;;;AC/HD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEe,SAASyF,sBAAT,GAAkC;AAC/CzJ,8DAAM,CAACyH,oEAAW,CAACvH,SAAb,EAAwB,QAAxB,EAAkC,YAAW;AACjD,QAAMwJ,WAAW,GAAG,KAAK/E,KAAL,CAAWC,IAAX,CAAgB8E,WAAhB,EAApB;AAEA,QAAIA,WAAW,KAAK,KAAKC,kBAArB,IAA2C,KAAKC,SAAL,EAA/C,EAAiE;AAEjE,SAAKD,kBAAL,GAA0BD,WAA1B;AAEA,QAAMG,UAAU,GAAG,KAAKlF,KAAL,CAAWC,IAA9B;AACA,QAAMkF,WAAW,GAAG,KAAKvJ,CAAL,EAApB;AAEA,SAAKA,CAAL,CAAO,4BAAP,EAAqCwJ,IAArC,CAA0C,YAAW;AACnDnE,OAAC,CAACwD,KAAF,CAAQY,IAAR,CAAa,IAAb,EAAmB,IAAnB,EAAyB,KAAzB,EAAgC,EAAhC,EAAoC;AAACC,aAAK,EAAE;AAACC,cAAI,EAAE,KAAKC,YAAL,CAAkB,MAAlB;AAAP;AAAR,OAApC;AACD,KAFD;AAIA,SAAK5J,CAAL,CAAO,cAAP,EAAuBwJ,IAAvB,CAA4B,YAAW;AACrC,UAAM/B,KAAK,GAAGzH,CAAC,CAAC,IAAD,CAAf;AACA,UAAMgF,EAAE,GAAGyC,KAAK,CAACc,IAAN,CAAW,IAAX,CAAX;AACA,UAAIb,OAAJ,CAHqC,CAKrC;AACA;;AACA,UAAMC,QAAQ,GAAG3H,CAAC,CAAC,sDAAD,CAAlB;AACAuJ,iBAAW,CAAC3B,MAAZ,CAAmBD,QAAnB;;AAEA,UAAMkC,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAC3B,eAAO7J,CAAC,iCAA8BgF,EAA9B,SAAR;AACD,OAFD;;AAIA,UAAM8E,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxB;AACA;AACA;AACA,YAAMC,KAAK,GAAGF,cAAc,EAA5B;AACA,YAAIG,OAAO,GAAG,KAAd;;AACA,YAAID,KAAK,CAACjJ,MAAV,EAAkB;AAChB,cAAMkF,GAAG,GAAG+D,KAAK,CAACE,MAAN,GAAejE,GAA3B;AACA,cAAMC,SAAS,GAAGiE,MAAM,CAACC,WAAzB;;AACA,cAAInE,GAAG,GAAGC,SAAN,IAAmBD,GAAG,GAAG+D,KAAK,CAACnE,MAAN,EAAN,GAAuBK,SAAS,GAAGjG,CAAC,CAACkK,MAAD,CAAD,CAAUtE,MAAV,EAA1D,EAA8E;AAC5EmE,iBAAK,CAACzB,QAAN,CAAe,SAAf;AACA0B,mBAAO,GAAG,IAAV;AACD;AACF,SAbuB,CAexB;AACA;;;AACA,YAAI,CAACA,OAAL,EAAc;AACZ;AACA;AACA,cAAMI,eAAe,GAAG,SAAlBA,eAAkB,GAAM;AAC5B,gBAAMC,aAAa,GAAG1C,QAAQ,CAAC9B,WAAT,CAAqB,IAArB,CAAtB;AACA,gBAAIoE,MAAM,GAAG,CAAb,CAF4B,CAI5B;AACA;;AACA,gBAAIxC,KAAK,CAACwC,MAAN,GAAejE,GAAf,GAAqBqE,aAArB,GAAqCrK,CAAC,CAACkK,MAAD,CAAD,CAAUjE,SAAV,KAAwBjG,CAAC,CAAC,SAAD,CAAD,CAAa6F,WAAb,EAAjE,EAA6F;AAC3FoE,oBAAM,IAAIxC,KAAK,CAAC5B,WAAN,CAAkB,IAAlB,CAAV;AACD,aAFD,MAEO;AACLoE,oBAAM,IAAII,aAAV;AACD;;AAED1C,oBAAQ,CAACpC,IAAT,GACG+E,GADH,CACO,KADP,EACc7C,KAAK,CAACwC,MAAN,GAAejE,GAAf,GAAqBuD,WAAW,CAACU,MAAZ,GAAqBjE,GAA1C,GAAgDiE,MAD9D,EAEGK,GAFH,CAEO,MAFP,EAEe7C,KAAK,CAAC3B,YAAN,GAAqBmE,MAArB,GAA8BlE,IAA9B,GAAqCwD,WAAW,CAACU,MAAZ,GAAqBlE,IAFzE,EAGGuE,GAHH,CAGO,WAHP,EAGoB7C,KAAK,CAAC3B,YAAN,GAAqBJ,KAArB,EAHpB;AAID,WAhBD;;AAkBA,cAAM6E,QAAQ,GAAG,SAAXA,QAAW,CAAAlG,IAAI,EAAI;AACvB,gBAAMC,UAAU,GAAGD,IAAI,CAACC,UAAL,EAAnB;AAEAe,aAAC,CAACC,MAAF,CAASqC,QAAQ,CAAC,CAAD,CAAjB,EAAsB,CACpBrD,UAAU,KAAKgF,UAAU,CAAChF,UAAX,EAAf,GACI,cAAI;AAAM,uBAAS,EAAC;AAAhB,eAAkDA,UAAU,CAACkG,KAAX,EAAlD,CAAJ,CADJ,GAEI,EAHgB,EAIpB,cAAKtC,oEAAW,CAACC,SAAZ,CAAsB;AAAC9D,kBAAI,EAAJA;AAAD,aAAtB,CAAL,CAJoB,CAAtB;AAMA+F,2BAAe;AAChB,WAVD;;AAYA,cAAM/F,IAAI,GAAGP,GAAG,CAACC,KAAJ,CAAU0G,OAAV,CAAkB,OAAlB,EAA2BzF,EAA3B,CAAb;;AACA,cAAIX,IAAI,IAAIA,IAAI,CAACC,UAAL,EAAZ,EAA+B;AAC7BiG,oBAAQ,CAAClG,IAAD,CAAR;AACD,WAFD,MAEO;AACLgB,aAAC,CAACC,MAAF,CAASqC,QAAQ,CAAC,CAAD,CAAjB,EAAsB+C,yEAAgB,CAACvC,SAAjB,EAAtB;AACArE,eAAG,CAACC,KAAJ,CAAUsC,IAAV,CAAe,OAAf,EAAwBrB,EAAxB,EAA4ByB,IAA5B,CAAiC8D,QAAjC;AACAH,2BAAe;AAChB;;AAEDjE,oBAAU,CAAC;AAAA,mBAAMwB,QAAQ,CAACU,GAAT,CAAa,eAAb,EAA8BC,QAA9B,CAAuC,IAAvC,CAAN;AAAA,WAAD,CAAV;AACD;AACF,OA7DD;;AA+DA,UAAMlB,WAAW,GAAG,SAAdA,WAAc,GAAM;AACxByC,sBAAc,GAAGxC,WAAjB,CAA6B,SAA7B;;AACA,YAAIM,QAAQ,CAACG,QAAT,CAAkB,IAAlB,CAAJ,EAA6B;AAC3BH,kBAAQ,CAACN,WAAT,CAAqB,IAArB,EAA2BC,GAA3B,CAA+B,eAA/B,EAAgD;AAAA,mBAAMK,QAAQ,CAACrG,IAAT,EAAN;AAAA,WAAhD;AACD;AACF,OALD;;AAOAmG,WAAK,CAACrF,EAAN,CAAS,YAAT,EAAuB,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACsI,cAAF,EAAJ;AAAA,OAAxB;AAEAlD,WAAK,CAACd,GAAN,CAAUgB,QAAV,EAAoBE,KAApB,CACE,YAAM;AACJ3B,oBAAY,CAACwB,OAAD,CAAZ;AACAA,eAAO,GAAGvB,UAAU,CAAC2D,WAAD,EAAc,GAAd,CAApB;AACD,OAJH,EAKE,YAAM;AACJ5D,oBAAY,CAACwB,OAAD,CAAZ;AACAmC,sBAAc,GAAGxC,WAAjB,CAA6B,SAA7B;AACAK,eAAO,GAAGvB,UAAU,CAACiB,WAAD,EAAc,GAAd,CAApB;AACD,OATH,EAWGhF,EAXH,CAWM,UAXN,EAWkB,UAAAC,CAAC,EAAI;AACnByH,mBAAW;AACXzH,SAAC,CAACuI,eAAF;AACD,OAdH;AAgBA5K,OAAC,CAAC6K,QAAD,CAAD,CAAYzI,EAAZ,CAAe,UAAf,EAA2BgF,WAA3B;AACD,KAvGD;AAwGD,GAtHK,CAAN;AAuHD,C;;;;;;;;;;;;AC7HD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AAEe,SAAS0D,kBAAT,GAA8B;AAC3CrL,8DAAM,CAACyH,oEAAW,CAACvH,SAAb,EAAwB,QAAxB,EAAkC,UAASC,QAAT,EAAmBC,aAAnB,EAAkC;AACxE,QAAMwE,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAxB;AAEA,QAAIxE,aAAa,IAAIwE,IAAI,CAAC0G,QAAL,EAAjB,IAAqCjH,GAAG,CAAC4E,OAAJ,CAAY3F,IAAZ,IAAoB,CAACsB,IAAI,CAACC,UAAL,GAAkB0G,QAAlB,EAA9D,EAA6F;AAE7F,QAAMC,SAAS,GAAG,KAAKjL,CAAL,CAAO,YAAP,CAAlB,CALwE,CAOxE;AACA;;AACA,QAAMD,UAAU,GAAGC,CAAC,CAAC,+CAAD,CAApB;;AAEA,QAAMkL,OAAO,GAAG,SAAVA,OAAU,CAAS7I,CAAT,EAAY;AAC1B8D,gBAAU,CAAC,YAAM;AACf,YAAMpF,OAAO,GAAGoK,mEAAY,CAACF,SAAD,CAA5B;;AACA,YAAIlK,OAAJ,EAAa;AACX,cAAMqK,MAAM,GAAG,IAAIC,mEAAJ,CAAoB;AAAChH,gBAAI,EAAJA,IAAD;AAAOtD,mBAAO,EAAPA;AAAP,WAApB,CAAf;AACAsE,WAAC,CAACC,MAAF,CAASvF,UAAU,CAAC,CAAD,CAAnB,EAAwBqL,MAAM,CAAC9F,MAAP,EAAxB;AAEA,cAAMgG,KAAK,GAAGpB,MAAM,CAACqB,YAAP,GAAsBC,UAAtB,CAAiC,CAAjC,EAAoCC,cAApC,EAAd;AACA,cAAMC,SAAS,GAAGJ,KAAK,CAAC,CAAD,CAAvB;;AAEA,cAAIjJ,CAAC,CAACsJ,OAAF,GAAYD,SAAS,CAACE,MAAtB,IAAgCvJ,CAAC,CAACwJ,OAAF,GAAYH,SAAS,CAACI,KAAtB,GAA8BJ,SAAS,CAAC3F,IAAV,GAAiB1D,CAAC,CAACwJ,OAArF,EAA8F;AAC5FT,kBAAM,CAACW,SAAP,CAAiBL,SAAS,CAAC3F,IAA3B,EAAiC2F,SAAS,CAAC1F,GAA3C;AACD,WAFD,MAEO;AACL,gBAAMgG,QAAQ,GAAGV,KAAK,CAACA,KAAK,CAACxK,MAAN,GAAe,CAAhB,CAAtB;AACAsK,kBAAM,CAACa,OAAP,CAAeD,QAAQ,CAACF,KAAxB,EAA+BE,QAAQ,CAACJ,MAAxC;AACD;AACF;AACF,OAhBS,EAgBP,CAhBO,CAAV;AAiBD,KAlBD;;AAoBA,SAAK5L,CAAL,GAASmC,KAAT,CAAepC,UAAf,EAA2BqC,EAA3B,CAA8B,SAA9B,EAAyC8I,OAAzC;;AAEA,QAAI,kBAAkBhB,MAAtB,EAA8B;AAC5BW,cAAQ,CAACqB,gBAAT,CAA0B,iBAA1B,EAA6ChB,OAA7C,EAAsD,KAAtD;AACD;AACF,GApCK,CAAN;AAqCD,C;;;;;;;;;;;;AC5CD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAEe,2EAAY;AACzBzL,8DAAM,CAACyH,oEAAW,CAACvH,SAAb,EAAwB,aAAxB,EAAuC,UAAUQ,KAAV,EAAiB;AAE5D,QAAMkE,IAAI,GAAG,KAAKD,KAAL,CAAWC,IAAxB;AAEA,QAAIA,IAAI,CAAC0G,QAAL,MAAoBjH,GAAG,CAAC4E,OAAJ,CAAY3F,IAAZ,IAAoB,CAACsB,IAAI,CAACC,UAAL,GAAkB0G,QAAlB,EAA7C,EAA4E;AAE5E7K,SAAK,CAACwG,GAAN,CAAU,OAAV,EACEwF,+DAAM,CAAChE,SAAP,CAAiB;AACfnF,eAAS,EAAE,qBADI;AAEfG,cAAQ,EAAEW,GAAG,CAACmB,UAAJ,CAAeC,KAAf,CAAqB,uCAArB,CAFK;AAGfkD,aAAO,EAAE;AAAA,eAAMH,4DAAK,CAAC5D,IAAD,CAAX;AAAA;AAHM,KAAjB,CADF;AAOD,GAbK,CAAN;AAcD,C;;;;;;;;;;;;;;;;;;ACrBD;;IAEqBnE,oB;;;;;;;;;;;SACnBkM,I,mBAAO;AACL,SAAK1K,MAAL,GAAc,KAAd;AACA,SAAKb,KAAL,GAAa,CAAb;AACA,SAAKwL,iBAAL,GAAyB,KAAzB;AACD,G;;SAEDC,I,mBAAO;AACL,WACE;AAAI,eAAS,EAAC;AAAd,OACG,KAAKlI,KAAL,CAAWjE,KAAX,CAAiB6H,GAAjB,CAAqB,UAAAuE,IAAI;AAAA,aAAI,cAAKA,IAAL,CAAJ;AAAA,KAAzB,CADH,CADF;AAKD,G;;SAEDhH,I,iBAAKQ,I,EAAMC,G,EAAK;AACd,SAAKhG,CAAL,GAASuF,IAAT,GAAgB+E,GAAhB,CAAoB;AAClBvE,UAAI,EAAEA,IAAI,GAAG,IADK;AAElBC,SAAG,EAAEA,GAAG,GAAG;AAFO,KAApB;AAIA,SAAKtE,MAAL,GAAc,IAAd;AACD,G;;SAEDJ,I,mBAAO;AACL,SAAKtB,CAAL,GAASsB,IAAT;AACA,SAAKI,MAAL,GAAc,KAAd;AACD,G;;SAEDE,Q,qBAAS4K,K,EAAO;AAAA;;AACd,SAAKH,iBAAL,GAAyB,IAAzB;AACA,SAAKhJ,QAAL,CAAc,KAAKxC,KAAL,GAAa2L,KAA3B,EAAkC,IAAlC;AACAtG,gBAAY,CAAC,KAAKuG,wBAAN,CAAZ;AACA,SAAKA,wBAAL,GAAgCtG,UAAU,CAAC;AAAA,aAAM,KAAI,CAACkG,iBAAL,GAAyB,KAA/B;AAAA,KAAD,EAAuC,GAAvC,CAA1C;AACD,G;;SAEDtK,Q,uBAAW;AACT,SAAK/B,CAAL,CAAO,IAAP,EAAa0M,EAAb,CAAgB,KAAK7L,KAArB,EAA4BwF,IAA5B,CAAiC,QAAjC,EAA2CsG,KAA3C;AACD,G;;SAEDtJ,Q,qBAASxC,K,EAAO+L,Y,EAAc;AAC5B,QAAI,KAAKP,iBAAL,IAA0B,CAACO,YAA/B,EAA6C;AAE7C,QAAMC,SAAS,GAAG,KAAK7M,CAAL,EAAlB;AACA,QAAM8M,MAAM,GAAGD,SAAS,CAACxG,IAAV,CAAe,IAAf,CAAf;AACA,QAAI0G,WAAW,GAAGlM,KAAlB;;AAEA,QAAIkM,WAAW,GAAG,CAAlB,EAAqB;AACnBA,iBAAW,GAAGD,MAAM,CAAChM,MAAP,GAAgB,CAA9B;AACD,KAFD,MAEO,IAAIiM,WAAW,IAAID,MAAM,CAAChM,MAA1B,EAAkC;AACvCiM,iBAAW,GAAG,CAAd;AACD;;AAED,SAAKlM,KAAL,GAAakM,WAAb;AAEA,QAAMC,KAAK,GAAGF,MAAM,CAACzF,WAAP,CAAmB,QAAnB,EAA6BqF,EAA7B,CAAgCK,WAAhC,EAA6CzE,QAA7C,CAAsD,QAAtD,CAAd;;AAEA,QAAIsE,YAAJ,EAAkB;AAChB,UAAMK,cAAc,GAAGJ,SAAS,CAAC5G,SAAV,EAAvB;AACA,UAAMiH,WAAW,GAAGL,SAAS,CAAC5C,MAAV,GAAmBjE,GAAvC;AACA,UAAMmH,cAAc,GAAGD,WAAW,GAAGL,SAAS,CAAChH,WAAV,EAArC;AACA,UAAMuH,OAAO,GAAGJ,KAAK,CAAC/C,MAAN,GAAejE,GAA/B;AACA,UAAMqH,UAAU,GAAGD,OAAO,GAAGJ,KAAK,CAACnH,WAAN,EAA7B;AAEA,UAAII,SAAJ;;AACA,UAAImH,OAAO,GAAGF,WAAd,EAA2B;AACzBjH,iBAAS,GAAGgH,cAAc,GAAGC,WAAjB,GAA+BE,OAA/B,GAAyCE,QAAQ,CAACT,SAAS,CAACvC,GAAV,CAAc,aAAd,CAAD,EAA+B,EAA/B,CAA7D;AACD,OAFD,MAEO,IAAI+C,UAAU,GAAGF,cAAjB,EAAiC;AACtClH,iBAAS,GAAGgH,cAAc,GAAGE,cAAjB,GAAkCE,UAAlC,GAA+CC,QAAQ,CAACT,SAAS,CAACvC,GAAV,CAAc,gBAAd,CAAD,EAAkC,EAAlC,CAAnE;AACD;;AAED,UAAI,OAAOrE,SAAP,KAAqB,WAAzB,EAAsC;AACpC4G,iBAAS,CAACU,IAAV,CAAe,IAAf,EAAqBC,OAArB,CAA6B;AAACvH,mBAAS,EAATA;AAAD,SAA7B,EAA0C,GAA1C;AACD;AACF;AACF,G;;;EA1E+CwH,uD;;;;;;;;;;;;;;;;;;;;ACFlD;AAEA;;;;IAGqBC,gB;;;;;;;;;;;AACnB;;;;;;;SAOAC,W,wBAAY1D,M,EAAQ;AAClB,WAAOnG,GAAG,CAACC,KAAJ,CAAUsC,IAAV,CAAe,OAAf,EAAwB;AAC7B7B,YAAM,EAAE;AACNoJ,YAAI,EAAE,SADA;AAENC,iBAAS,EAAE,KAAK9K,IAAL,CAAUiC,EAAV;AAFL,OADqB;AAK7BuB,UAAI,EAAE;AAAC0D,cAAM,EAANA,MAAD;AAASzD,aAAK,EAAE,KAAKsH;AAArB,OALuB;AAM7BnJ,UAAI,EAAE;AANuB,KAAxB,CAAP;AAQD,G;;;EAjB2CoJ,sE;;;;;;;;;;;;;;;;;;;;;;ACL9C;AACA;;IAEqBC,yB;;;;;;;;;;;SACnBhF,I,mBAAO;AACL,WAAO,cAAP;AACD,G;;SAEDW,I,mBAAO;AACL,QAAMsE,YAAY,GAAG,KAAK7J,KAAL,CAAW6J,YAAhC;AACA,QAAM5J,IAAI,GAAG4J,YAAY,CAACC,OAAb,EAAb;AACA,QAAMnN,OAAO,GAAGkN,YAAY,CAAClN,OAAb,EAAhB;AAEA,WAAO+C,GAAG,CAAC+E,KAAJ,CAAUvE,UAAV,CAAqBD,IAAI,CAACC,UAAL,EAArB,EAAwCvD,OAAO,IAAIA,OAAO,CAACoN,WAA3D,CAAP;AACD,G;;SAEDpN,O,sBAAU;AACR,QAAMkN,YAAY,GAAG,KAAK7J,KAAL,CAAW6J,YAAhC;AACA,QAAMlL,IAAI,GAAGkL,YAAY,CAACG,QAAb,EAAb;AAEA,WAAOtK,GAAG,CAACmB,UAAJ,CAAe8D,WAAf,CAA2B,yDAA3B,EAAsF,CAAtF,EAAyF;AAAChG,UAAI,EAAJA;AAAD,KAAzF,CAAP;AACD,G;;SAEDsL,O,sBAAU;AACR,WAAOlJ,oEAAQ,CAAC,KAAKf,KAAL,CAAW6J,YAAX,CAAwBC,OAAxB,GAAkC9I,YAAlC,EAAD,EAAmD,GAAnD,CAAf;AACD,G;;;EAtBoDkJ,qE;;;;;;;;;;;;;;;;;;;;;;;ACHvD;AACA;AAEA;;IAEqBjD,e;;;;;;;;;;;SACnBiB,I,mBAAO;AAAA;;AACL,QAAMjI,IAAI,GAAGkK,2DAAO,CAAC,KAAKnK,KAAN,EAAa,MAAb,CAApB;AACA,QAAMrD,OAAO,GAAGwN,2DAAO,CAAC,KAAKnK,KAAN,EAAa,SAAb,CAAvB;AAEA,SAAKA,KAAL,CAAWpB,SAAX,GAAuB,wBAAvB;AACA,SAAKoB,KAAL,CAAW4E,IAAX,GAAkB,mBAAlB;AACA,SAAK5E,KAAL,CAAWjB,QAAX,GAAsBW,GAAG,CAACmB,UAAJ,CAAeC,KAAf,CAAqB,yCAArB,CAAtB;;AACA,SAAKd,KAAL,CAAWgE,OAAX,GAAqB,YAAM;AACzB,WAAI,CAAC9G,IAAL;;AACA2G,kEAAK,CAAC5D,IAAD,EAAOtD,OAAP,CAAL;AACD,KAHD;;AAIA,SAAKqD,KAAL,CAAWoK,WAAX,GAAyB,UAACnM,CAAD;AAAA,aAAOA,CAAC,CAACuI,eAAF,EAAP;AAAA,KAAzB;;AAEA,6BAAa0B,IAAb;AACD,G;;SAED/E,M,mBAAO1H,a,EAAe;AACpB,QAAIA,aAAJ,EAAmB;AAEnBG,KAAC,CAAC6K,QAAD,CAAD,CAAYzI,EAAZ,CAAe,WAAf,EAA4B,KAAKd,IAAL,CAAUU,IAAV,CAAe,IAAf,CAA5B;AACD,G;;SAEDuD,I,iBAAKQ,I,EAAMC,G,EAAK;AACd,QAAMyB,KAAK,GAAG,KAAKzH,CAAL,GAASuF,IAAT,EAAd;AACA,QAAMkJ,YAAY,GAAGhH,KAAK,CAAC3B,YAAN,GAAqBmE,MAArB,EAArB;AAEAxC,SAAK,CACF6C,GADH,CACO,MADP,EACevE,IAAI,GAAG0I,YAAY,CAAC1I,IADnC,EAEGuE,GAFH,CAEO,KAFP,EAEctE,GAAG,GAAGyI,YAAY,CAACzI,GAFjC;AAGD,G;;SAED+F,S,sBAAUhG,I,EAAMC,G,EAAK;AACnB,QAAMyB,KAAK,GAAG,KAAKzH,CAAL,EAAd;AAEA,SAAKuF,IAAL,CAAUQ,IAAV,EAAgB/F,CAAC,CAACkK,MAAD,CAAD,CAAUjE,SAAV,KAAwBD,GAAxB,GAA8ByB,KAAK,CAAC5B,WAAN,EAA9B,GAAoD,CAApE;AACD,G;;SAEDoG,O,oBAAQH,K,EAAOF,M,EAAQ;AACrB,QAAMnE,KAAK,GAAG,KAAKzH,CAAL,EAAd;AAEA,SAAKuF,IAAL,CAAUuG,KAAK,GAAGrE,KAAK,CAAC9B,UAAN,EAAlB,EAAsC3F,CAAC,CAACkK,MAAD,CAAD,CAAUjE,SAAV,KAAwB2F,MAAxB,GAAiC,CAAvE;AACD,G;;SAEDtK,I,mBAAO;AACL,SAAKtB,CAAL,GAASsB,IAAT;AACD,G;;;EA9C0C6K,+D;;;;;;;;;;;;;;;;;;;;;;ACL7C;AACA;;IAEqBuC,yB;;;;;;;;;;;SACnB1F,I,mBAAO;AACL,WAAO,WAAP;AACD,G;;SAEDW,I,mBAAO;AACL,QAAMtF,IAAI,GAAG,KAAKD,KAAL,CAAW6J,YAAX,CAAwBC,OAAxB,EAAb;AAEA,WAAOpK,GAAG,CAAC+E,KAAJ,CAAUvE,UAAV,CAAqBD,IAAI,CAACC,UAAL,EAArB,EAAwCD,IAAI,CAACK,MAAL,EAAxC,CAAP;AACD,G;;SAED3D,O,sBAAU;AACR,QAAMgC,IAAI,GAAG,KAAKqB,KAAL,CAAW6J,YAAX,CAAwBG,QAAxB,EAAb;AAEA,WAAOtK,GAAG,CAACmB,UAAJ,CAAeC,KAAf,CAAqB,yDAArB,EAAgF;AAACnC,UAAI,EAAJA;AAAD,KAAhF,CAAP;AACD,G;;SAEDsL,O,sBAAU;AACR,WAAOlJ,oEAAQ,CAAC,KAAKf,KAAL,CAAW6J,YAAX,CAAwBC,OAAxB,GAAkC9I,YAAlC,EAAD,EAAmD,GAAnD,CAAf;AACD,G;;;EAnBoDkJ,qE;;;;;;;;;;;;;;ACHvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAxK,iDAAG,CAAC6K,YAAJ,CAAiBhI,GAAjB,CAAqB,iBAArB,EAAwC,YAAW;AACjD;AACA;AACAuC,yEAAsB,GAH2B,CAKjD;AACA;;AACArC,qEAAkB,GAP+B,CASjD;AACA;;AACA+H,qEAAkB,GAX+B,CAajD;;AACA9D,qEAAkB,GAd+B,CAgBjD;AACA;;AACAtL,0EAAuB;AAEvBsE,mDAAG,CAAC+K,sBAAJ,CAA2BC,aAA3B,GAA2Cd,6EAA3C;AACAlK,mDAAG,CAAC+K,sBAAJ,CAA2BE,aAA3B,GAA2CL,8EAA3C,CArBiD,CAuBjD;;AACAjP,8DAAM,CAACuP,yEAAgB,CAACrP,SAAlB,EAA6B,mBAA7B,EAAkD,UAASQ,KAAT,EAAgB;AACtEA,SAAK,CAACwG,GAAN,CAAU,eAAV,EAA2B;AACzBsI,UAAI,EAAE,eADmB;AAEzBjG,UAAI,EAAE,cAFmB;AAGzBkG,WAAK,EAAEpL,iDAAG,CAACmB,UAAJ,CAAeC,KAAf,CAAqB,4DAArB;AAHkB,KAA3B;AAMA/E,SAAK,CAACwG,GAAN,CAAU,eAAV,EAA2B;AACzBsI,UAAI,EAAE,eADmB;AAEzBjG,UAAI,EAAE,WAFmB;AAGzBkG,WAAK,EAAEpL,iDAAG,CAACmB,UAAJ,CAAeC,KAAf,CAAqB,4DAArB;AAHkB,KAA3B;AAKD,GAZK,CAAN,CAxBiD,CAsCjD;;AACApB,mDAAG,CAACqL,MAAJ,CAAW,eAAX,IAA8B;AAACC,QAAI,EAAE,uBAAP;AAAgCjH,aAAS,EAAEuF,qEAAgB,CAACvF,SAAjB;AAA3C,GAA9B;AACA1I,8DAAM,CAAC4P,kEAAQ,CAAC1P,SAAV,EAAqB,UAArB,EAAiC,UAASQ,KAAT,EAAgB;AACrD,QAAM4C,IAAI,GAAG,KAAKA,IAAlB;AACA5C,SAAK,CAACwG,GAAN,CAAU,UAAV,EACE2I,oEAAU,CAACnH,SAAX,CAAqB;AACnBwB,UAAI,EAAE7F,iDAAG,CAAC+E,KAAJ,CAAU,eAAV,EAA2B;AAAC5F,gBAAQ,EAAEF,IAAI,CAACE,QAAL;AAAX,OAA3B,CADa;AAEnBgM,UAAI,EAAE,UAFa;AAGnB9L,cAAQ,EAAE,CAACW,iDAAG,CAACmB,UAAJ,CAAeC,KAAf,CAAqB,0CAArB,CAAD,CAHS;AAInB8D,UAAI,EAAE;AAJa,KAArB,CADF,EAOE,EAPF;AASD,GAXK,CAAN,CAxCiD,CAqDjD;;AACAuG,qEAAe,CAACC,eAAhB,CAAgCtL,IAAhC,CAAqC,eAArC;AACD,CAvDD;;;;;;;;;;;;;AChBA;AAAA;AAAA;AAAA;AAAA;;AAEA,SAASuL,aAAT,CAAuBpL,IAAvB,EAA6B8D,SAA7B,EAAwCuH,KAAxC,EAA+C;AAC7C,MAAM3M,IAAI,GAAGsB,IAAI,CAACtB,IAAL,EAAb;AACA,MAAM4M,OAAO,GAAG,OAAO5M,IAAI,GAAGA,IAAI,CAACE,QAAL,EAAH,GAAqBoB,IAAI,CAACK,MAAL,EAAhC,IAAiD,GAAjD,GAAuDL,IAAI,CAACW,EAAL,EAAvE,CAF6C,CAI7C;AACA;AACA;;AACA,MAAI,CAACmD,SAAS,CAACpH,OAAV,EAAL,EAA0B;AACxBoH,aAAS,CAAC/D,KAAV,CAAgBwL,eAAhB,GAAkCD,OAAlC;AACD;;AAED,MAAME,cAAc,GAAG1H,SAAS,CAACnH,MAAV,CAAiB8O,iBAAjB,GAAqC,CAArC,CAAvB;AACA,MAAMC,SAAS,GAAG5H,SAAS,CAACnH,MAAV,CAAiB0B,KAAjB,GAAyBkG,KAAzB,CAA+B,CAA/B,EAAkCiH,cAAlC,CAAlB;AACA,MAAMG,iBAAiB,GAAGD,SAAS,CAACjP,MAAV,IAAoB,CAApB,GAAwB,CAAxB,GAA4B,IAAIiP,SAAS,CAACE,KAAV,CAAgB,YAAhB,EAA8B,CAA9B,EAAiCnP,MAA3F;AAEAqH,WAAS,CAACnH,MAAV,CAAiB4F,cAAjB,CACEsJ,KAAK,CAACF,iBAAD,CAAL,CAAyBG,IAAzB,CAA8B,IAA9B,MAAsC;AACrCT,OAAK,GACF,oBAAoBC,OAApB,GAA8B,IAA9B,GAAqCD,KAAK,CAACU,IAAN,GAAaC,OAAb,CAAqB,KAArB,EAA4B,MAA5B,CAArC,GAA2E,cADzE,GAEFV,OAHJ,CADF;AAMD;;AAEc,SAAS1H,KAAT,CAAe5D,IAAf,EAAqBqL,KAArB,EAA4B;AACzC,MAAMvH,SAAS,GAAGrE,GAAG,CAAChE,QAAJ,CAAaqI,SAA/B;;AACA,MAAIA,SAAS,IAAIA,SAAS,CAAC/D,KAAV,CAAgBC,IAA7B,IAAqC8D,SAAS,CAAC/D,KAAV,CAAgBC,IAAhB,CAAqBC,UAArB,OAAsCD,IAAI,CAACC,UAAL,EAA/E,EAAkG;AAChGmL,iBAAa,CAACpL,IAAD,EAAO8D,SAAP,EAAkBuH,KAAlB,CAAb;AACD,GAFD,MAEO;AACLY,0EAAkB,CAACC,WAAnB,CAA+B9G,IAA/B,CAAoCpF,IAAI,CAACC,UAAL,EAApC,EACGmC,IADH,CACQ,UAAA+J,YAAY;AAAA,aAAIf,aAAa,CAACpL,IAAD,EAAOmM,YAAP,EAAqBd,KAArB,CAAjB;AAAA,KADpB;AAED;AACF,C;;;;;;;;;;;;ACjCD;AAAA;AAAe,SAASvE,YAAT,CAAsBsF,IAAtB,EAA4B;AACzC,MAAMC,SAAS,GAAGxG,MAAM,CAACqB,YAAP,EAAlB;;AACA,MAAImF,SAAS,CAACC,UAAd,EAA0B;AACxB,QAAMC,KAAK,GAAGF,SAAS,CAAClF,UAAV,CAAqB,CAArB,CAAd;AACA,QAAMlI,MAAM,GAAGsN,KAAK,CAACC,uBAArB;;AACA,QAAIJ,IAAI,CAAC,CAAD,CAAJ,KAAYnN,MAAZ,IAAsBtD,CAAC,CAAC8Q,QAAF,CAAWL,IAAI,CAAC,CAAD,CAAf,EAAoBnN,MAApB,CAA1B,EAAuD;AACrD,UAAMyN,KAAK,GAAG/Q,CAAC,CAAC,OAAD,CAAD,CAAW4H,MAAX,CAAkBgJ,KAAK,CAACI,aAAN,EAAlB,CAAd,CADqD,CAGrD;;AACAD,WAAK,CAAC1K,IAAN,CAAW,WAAX,EAAwB4K,WAAxB,CAAoC,YAAW;AAC7C,eAAO,KAAKC,GAAZ;AACD,OAFD,EAJqD,CAQrD;;AACAH,WAAK,CAAC1K,IAAN,CAAW,KAAX,EAAkB4K,WAAlB,CAA8B,YAAW;AACvC,eAAO,SAAS,KAAKE,GAAd,GAAoB,GAA3B;AACD,OAFD,EATqD,CAarD;;AACAJ,WAAK,CAAC1K,IAAN,CAAW,GAAX,EAAgB4K,WAAhB,CAA4B,YAAW;AACrC,eAAO,MAAM,KAAKG,SAAX,GAAuB,IAAvB,GAA8B,KAAKzH,IAAnC,GAA0C,GAAjD;AACD,OAFD;AAIA,aAAOoH,KAAK,CAACM,IAAN,EAAP;AACD;AACF;;AACD,SAAO,EAAP;AACD,C;;;;;;;;;;;;AC3BD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEO,SAASC,kBAAT,CAA4BC,GAA5B,EAAiC;AACtC,MAAMxO,IAAI,GAAGe,GAAG,CAACC,KAAJ,CAAUyN,KAAV,CAAgB,OAAhB,EAAyB,UAAzB,EAAqCD,GAAG,CAAC3H,YAAJ,CAAiB,UAAjB,CAArC,CAAb;;AAEA,MAAI7G,IAAJ,EAAU;AACRwO,OAAG,CAACE,YAAJ,CAAiB,IAAjB,EAAuB1O,IAAI,CAACiC,EAAL,EAAvB;AACAuM,OAAG,CAACE,YAAJ,CAAiB,aAAjB,EAAgCC,+DAAW,CAACzO,8DAAQ,CAACF,IAAD,CAAT,CAA3C;AAEA,WAAO,IAAP;AACD;AACF;AAEM,SAAS4O,kBAAT,CAA4BJ,GAA5B,EAAiC;AACtC,MAAMlN,IAAI,GAAGP,GAAG,CAACC,KAAJ,CAAU0G,OAAV,CAAkB,OAAlB,EAA2B8G,GAAG,CAAC3H,YAAJ,CAAiB,IAAjB,CAA3B,CAAb;;AAEA,MAAIvF,IAAJ,EAAU;AACRkN,OAAG,CAACE,YAAJ,CAAiB,cAAjB,EAAiCpN,IAAI,CAACC,UAAL,GAAkBU,EAAlB,EAAjC;AACAuM,OAAG,CAACE,YAAJ,CAAiB,QAAjB,EAA2BpN,IAAI,CAACK,MAAL,EAA3B;AACA6M,OAAG,CAACE,YAAJ,CAAiB,aAAjB,EAAgCC,+DAAW,CAACzO,8DAAQ,CAACoB,IAAI,CAACtB,IAAL,EAAD,CAAT,CAA3C;AAEA,WAAO,IAAP;AACD;AACF,C;;;;;;;;;;;ACxBD,iD;;;;;;;;;;;ACAA,6C;;;;;;;;;;;ACAA,2C;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,8D;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,6D;;;;;;;;;;;ACAA,mE;;;;;;;;;;;ACAA,2D;;;;;;;;;;;ACAA,8C;;;;;;;;;;;ACAA,sD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,oD;;;;;;;;;;;ACAA,+D;;;;;;;;;;;ACAA,wD;;;;;;;;;;;ACAA,mD;;;;;;;;;;;ACAA,gE;;;;;;;;;;;ACAA,iE;;;;;;;;;;;ACAA,qD;;;;;;;;;;;ACAA,yD;;;;;;;;;;;ACAA,oD","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","/*\n * This file is part of Flarum.\n *\n * (c) Toby Zerner <toby.zerner@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\nexport * from './src/forum';\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","/* jshint browser: true */\n\n(function () {\n\n// We'll copy the properties below into the mirror div.\n// Note that some browsers, such as Firefox, do not concatenate properties\n// into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\n// so we have to list every single property explicitly.\nvar properties = [\n  'direction',  // RTL support\n  'boxSizing',\n  'width',  // on Chrome and IE, exclude the scrollbar, so the mirror div wraps exactly as the textarea does\n  'height',\n  'overflowX',\n  'overflowY',  // copy the scrollbar for IE\n\n  'borderTopWidth',\n  'borderRightWidth',\n  'borderBottomWidth',\n  'borderLeftWidth',\n  'borderStyle',\n\n  'paddingTop',\n  'paddingRight',\n  'paddingBottom',\n  'paddingLeft',\n\n  // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'fontStretch',\n  'fontSize',\n  'fontSizeAdjust',\n  'lineHeight',\n  'fontFamily',\n\n  'textAlign',\n  'textTransform',\n  'textIndent',\n  'textDecoration',  // might not make a difference, but better be safe\n\n  'letterSpacing',\n  'wordSpacing',\n\n  'tabSize',\n  'MozTabSize'\n\n];\n\nvar isBrowser = (typeof window !== 'undefined');\nvar isFirefox = (isBrowser && window.mozInnerScreenX != null);\n\nfunction getCaretCoordinates(element, position, options) {\n  if (!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n    if (el) el.parentNode.removeChild(el);\n  }\n\n  // The mirror div will replicate the textarea's style\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n\n  var style = div.style;\n  var computed = window.getComputedStyle ? window.getComputedStyle(element) : element.currentStyle;  // currentStyle for IE < 9\n  var isInput = element.nodeName === 'INPUT';\n\n  // Default textarea styles\n  style.whiteSpace = 'pre-wrap';\n  if (!isInput)\n    style.wordWrap = 'break-word';  // only for textarea-s\n\n  // Position off-screen\n  style.position = 'absolute';  // required to return coordinates properly\n  if (!debug)\n    style.visibility = 'hidden';  // not 'display: none' because we want rendering\n\n  // Transfer the element's properties to the div\n  properties.forEach(function (prop) {\n    if (isInput && prop === 'lineHeight') {\n      // Special case for <input>s because text is rendered centered and line height may be != height\n      style.lineHeight = computed.height;\n    } else {\n      style[prop] = computed[prop];\n    }\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > parseInt(computed.height))\n      style.overflowY = 'scroll';\n  } else {\n    style.overflow = 'hidden';  // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position);\n  // The second special handling for input type=\"text\" vs textarea:\n  // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n  if (isInput)\n    div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n\n  var span = document.createElement('span');\n  // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // For inputs, just '.' would be enough, but no need to bother.\n  span.textContent = element.value.substring(position) || '.';  // || because a completely empty faux span doesn't render at all\n  div.appendChild(span);\n\n  var coordinates = {\n    top: span.offsetTop + parseInt(computed['borderTopWidth']),\n    left: span.offsetLeft + parseInt(computed['borderLeftWidth']),\n    height: parseInt(computed['lineHeight'])\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#aaa';\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nif (typeof module != 'undefined' && typeof module.exports != 'undefined') {\n  module.exports = getCaretCoordinates;\n} else if(isBrowser) {\n  window.getCaretCoordinates = getCaretCoordinates;\n}\n\n}());\n","import getCaretCoordinates from 'textarea-caret';\n\nimport { extend } from 'flarum/extend';\nimport ComposerBody from 'flarum/components/ComposerBody';\nimport TextEditor from 'flarum/components/TextEditor';\nimport TextEditorButton from 'flarum/components/TextEditorButton';\nimport avatar from 'flarum/helpers/avatar';\nimport usernameHelper from 'flarum/helpers/username';\nimport highlight from 'flarum/helpers/highlight';\nimport KeyboardNavigatable from 'flarum/utils/KeyboardNavigatable';\nimport { truncate } from 'flarum/utils/string';\n\nimport AutocompleteDropdown from './components/AutocompleteDropdown';\n\nexport default function addComposerAutocomplete() {\n  extend(ComposerBody.prototype, 'config', function(original, isInitialized) {\n    if (isInitialized) return;\n\n    const composer = this;\n    const $container = $('<div class=\"ComposerBody-mentionsDropdownContainer\"></div>');\n    const dropdown = new AutocompleteDropdown({items: []});\n    const $textarea = this.$('textarea').wrap('<div class=\"ComposerBody-mentionsWrapper\"></div>');\n    const searched = [];\n    let mentionStart;\n    let typed;\n    let searchTimeout;\n\n    const applySuggestion = function(replacement) {\n      const insert = replacement + ' ';\n\n      // When calling setValue(), mentionStart will be set back to 0 so we need to compute this beforehand\n      const index = mentionStart - 1 + insert.length;\n\n      const content = composer.content();\n      composer.editor.setValue(content.substring(0, mentionStart - 1) + insert + content.substr($textarea[0].selectionStart));\n\n      composer.editor.setSelectionRange(index, index);\n\n      dropdown.hide();\n    };\n\n    this.navigator = new KeyboardNavigatable();\n    this.navigator\n      .when(() => dropdown.active)\n      .onUp(() => dropdown.navigate(-1))\n      .onDown(() => dropdown.navigate(1))\n      .onSelect(dropdown.complete.bind(dropdown))\n      .onCancel(dropdown.hide.bind(dropdown))\n      .bindTo($textarea);\n\n    $textarea\n      .after($container)\n      .on('click keyup input', function(e) {\n        // Up, down, enter, tab, escape, left, right.\n        if ([9, 13, 27, 40, 38, 37, 39].indexOf(e.which) !== -1) return;\n\n        const cursor = this.selectionStart;\n\n        if (this.selectionEnd - cursor > 0) return;\n\n        // Search backwards from the cursor for an '@' symbol. If we find one,\n        // we will want to show the autocomplete dropdown!\n        const value = this.value;\n        mentionStart = 0;\n        for (let i = cursor - 1; i >= cursor - 30; i--) {\n          const character = value.substr(i, 1);\n          if (character === '@') {\n            mentionStart = i + 1;\n            break;\n          }\n        }\n\n        dropdown.hide();\n        dropdown.active = false;\n\n        if (mentionStart) {\n          typed = value.substring(mentionStart, cursor).toLowerCase();\n\n          const makeSuggestion = function(user, replacement, content, className = '') {\n            const username = usernameHelper(user);\n            if (typed) {\n              username.children[0] = highlight(username.children[0], typed);\n            }\n\n            return (\n              <button className={'PostPreview ' + className}\n                onclick={() => applySuggestion(replacement)}\n                onmouseenter={function() {\n                  dropdown.setIndex($(this).parent().index());\n                }}>\n                <span className=\"PostPreview-content\">\n                  {avatar(user)}\n                  {username} {' '}\n                  {content}\n                </span>\n              </button>\n            );\n          };\n\n          const userMatches = function(user) {\n            const names = [\n              user.username(),\n              user.displayName()\n            ];\n\n            return names.some(value => value.toLowerCase().substr(0, typed.length) === typed);\n          };\n\n          const buildSuggestions = () => {\n            const suggestions = [];\n\n            // If the user has started to type a username, then suggest users\n            // matching that username.\n            if (typed) {\n              app.store.all('users').forEach(user => {\n                if (!userMatches(user)) return;\n\n                suggestions.push(\n                  makeSuggestion(user, '@' + user.username(), '', 'MentionsDropdown-user')\n                );\n              });\n            }\n\n            // If the user is replying to a discussion, or if they are editing a\n            // post, then we can suggest other posts in the discussion to mention.\n            // We will add the 5 most recent comments in the discussion which\n            // match any username characters that have been typed.\n            const composerPost = composer.props.post;\n            const discussion = (composerPost && composerPost.discussion()) || composer.props.discussion;\n            if (discussion) {\n              discussion.posts()\n                .filter(post => post && post.contentType() === 'comment' && (!composerPost || post.number() < composerPost.number()))\n                .sort((a, b) => b.createdAt() - a.createdAt())\n                .filter(post => {\n                  const user = post.user();\n                  return user && userMatches(user);\n                })\n                .splice(0, 5)\n                .forEach(post => {\n                  const user = post.user();\n                  suggestions.push(\n                    makeSuggestion(user, '@' + user.username() + '#' + post.id(), [\n                      app.translator.trans('flarum-mentions.forum.composer.reply_to_post_text', {number: post.number()}), ' â€” ',\n                      truncate(post.contentPlain(), 200)\n                    ], 'MentionsDropdown-post')\n                  );\n                });\n            }\n\n            if (suggestions.length) {\n              dropdown.props.items = suggestions;\n              m.render($container[0], dropdown.render());\n\n              dropdown.show();\n              const coordinates = getCaretCoordinates(this, mentionStart);\n              const width = dropdown.$().outerWidth();\n              const height = dropdown.$().outerHeight();\n              const parent = dropdown.$().offsetParent();\n              let left = coordinates.left;\n              let top = coordinates.top - this.scrollTop + 15;\n              if (top + height > parent.height()) {\n                top = coordinates.top - this.scrollTop - height - 15;\n              }\n              if (left + width > parent.width()) {\n                left = parent.width() - width;\n              }\n              dropdown.show(left, top);\n            } else {\n              dropdown.active = false;\n              dropdown.hide();\n            }\n          };\n\n          dropdown.active = true;\n\n          buildSuggestions();\n\n          dropdown.setIndex(0);\n          dropdown.$().scrollTop(0);\n\n          clearTimeout(searchTimeout);\n          if (typed) {\n            searchTimeout = setTimeout(function() {\n              const typedLower = typed.toLowerCase();\n              if (searched.indexOf(typedLower) === -1) {\n                app.store.find('users', {filter: {q: typed}, page: {limit: 5}}).then(() => {\n                  if (dropdown.active) buildSuggestions();\n                });\n                searched.push(typedLower);\n              }\n            }, 250);\n          }\n        }\n      });\n  });\n\n  extend(TextEditor.prototype, 'toolbarItems', function(items) {\n    items.add('mention', (\n      <TextEditorButton onclick={() => this.insertAtCursor('@')} icon=\"fas fa-at\">\n        {app.translator.trans('flarum-mentions.forum.composer.mention_tooltip')}\n      </TextEditorButton>\n    ));\n  });\n}\n","import { extend } from 'flarum/extend';\nimport Model from 'flarum/Model';\nimport Post from 'flarum/models/Post';\nimport CommentPost from 'flarum/components/CommentPost';\nimport PostPreview from 'flarum/components/PostPreview';\nimport punctuateSeries from 'flarum/helpers/punctuateSeries';\nimport username from 'flarum/helpers/username';\nimport icon from 'flarum/helpers/icon';\n\nexport default function addMentionedByList() {\n  Post.prototype.mentionedBy = Model.hasMany('mentionedBy');\n\n  extend(CommentPost.prototype, 'footerItems', function(items) {\n    const post = this.props.post;\n    const replies = post.mentionedBy();\n\n    if (replies && replies.length) {\n      // If there is only one reply, and it's adjacent to this post, we don't\n      // really need to show the list.\n      if (replies.length === 1 && replies[0].number() === post.number() + 1) {\n        return;\n      }\n\n      const hidePreview = () => {\n        this.$('.Post-mentionedBy-preview')\n          .removeClass('in')\n          .one('transitionend', function() { $(this).hide(); });\n      };\n\n      const config = function(element, isInitialized) {\n        if (isInitialized) return;\n\n        const $this = $(element);\n        let timeout;\n\n        const $preview = $('<ul class=\"Dropdown-menu Post-mentionedBy-preview fade\"/>');\n        $this.append($preview);\n\n        $this.children().hover(function() {\n          clearTimeout(timeout);\n          timeout = setTimeout(function() {\n            if (!$preview.hasClass('in') && $preview.is(':visible')) return;\n\n            // When the user hovers their mouse over the list of people who have\n            // replied to the post, render a list of reply previews into a\n            // popup.\n            m.render($preview[0], replies.map(reply => (\n              <li data-number={reply.number()}>\n                {PostPreview.component({\n                  post: reply,\n                  onclick: hidePreview\n                })}\n              </li>\n            )));\n            $preview.show();\n            setTimeout(() => $preview.off('transitionend').addClass('in'));\n          }, 500);\n        }, function() {\n          clearTimeout(timeout);\n          timeout = setTimeout(hidePreview, 250);\n        });\n\n        // Whenever the user hovers their mouse over a particular name in the\n        // list of repliers, highlight the corresponding post in the preview\n        // popup.\n        $this.find('.Post-mentionedBy-summary a').hover(function() {\n          $preview.find('[data-number=\"' + $(this).data('number') + '\"]').addClass('active');\n        }, function() {\n          $preview.find('[data-number]').removeClass('active');\n        });\n      };\n\n      const users = [];\n      const repliers = replies\n        .sort(reply => reply.user() === app.session.user ? -1 : 0)\n        .filter(reply => {\n          const user = reply.user();\n          if (users.indexOf(user) === -1) {\n            users.push(user);\n            return true;\n          }\n        });\n\n      const limit = 4;\n      const overLimit = repliers.length > limit;\n\n      // Create a list of unique users who have replied. So even if a user has\n      // replied twice, they will only be in this array once.\n      const names = repliers\n        .slice(0, overLimit ? limit - 1 : limit)\n        .map(reply => {\n          const user = reply.user();\n\n          return (\n            <a href={app.route.post(reply)}\n               config={m.route}\n               onclick={hidePreview}\n               data-number={reply.number()}>\n              {app.session.user === user ? app.translator.trans('flarum-mentions.forum.post.you_text') : username(user)}\n            </a>\n          );\n        });\n\n      // If there are more users that we've run out of room to display, add a \"x\n      // others\" name to the end of the list. Clicking on it will display a modal\n      // with a full list of names.\n      if (overLimit) {\n        const count = repliers.length - names.length;\n\n        names.push(\n          app.translator.transChoice('flarum-mentions.forum.post.others_text', count, {count})\n        );\n      }\n\n      items.add('replies',\n        <div className=\"Post-mentionedBy\" config={config}>\n          <span className=\"Post-mentionedBy-summary\">\n            {icon('fas fa-reply')}\n            {app.translator.transChoice('flarum-mentions.forum.post.mentioned_by' + (repliers[0].user() === app.session.user ? '_self' : '') + '_text', names.length, {\n              count: names.length,\n              users: punctuateSeries(names)\n            })}\n          </span>\n        </div>\n      );\n    }\n  });\n}\n","import { extend } from 'flarum/extend';\nimport CommentPost from 'flarum/components/CommentPost';\nimport PostPreview from 'flarum/components/PostPreview';\nimport LoadingIndicator from 'flarum/components/LoadingIndicator';\n\nexport default function addPostMentionPreviews() {\n  extend(CommentPost.prototype, 'config', function() {\n    const contentHtml = this.props.post.contentHtml();\n\n    if (contentHtml === this.oldPostContentHtml || this.isEditing()) return;\n\n    this.oldPostContentHtml = contentHtml;\n\n    const parentPost = this.props.post;\n    const $parentPost = this.$();\n\n    this.$('.UserMention, .PostMention').each(function() {\n      m.route.call(this, this, false, {}, {attrs: {href: this.getAttribute('href')}});\n    });\n\n    this.$('.PostMention').each(function() {\n      const $this = $(this);\n      const id = $this.data('id');\n      let timeout;\n\n      // Wrap the mention link in a wrapper element so that we can insert a\n      // preview popup as its sibling and relatively position it.\n      const $preview = $('<ul class=\"Dropdown-menu PostMention-preview fade\"/>');\n      $parentPost.append($preview);\n\n      const getPostElement = () => {\n        return $(`.PostStream-item[data-id=\"${id}\"]`);\n      };\n\n      const showPreview = () => {\n        // When the user hovers their mouse over the mention, look for the\n        // post that it's referring to in the stream, and determine if it's\n        // in the viewport. If it is, we will \"pulsate\" it.\n        const $post = getPostElement();\n        let visible = false;\n        if ($post.length) {\n          const top = $post.offset().top;\n          const scrollTop = window.pageYOffset;\n          if (top > scrollTop && top + $post.height() < scrollTop + $(window).height()) {\n            $post.addClass('pulsate');\n            visible = true;\n          }\n        }\n\n        // Otherwise, we will show a popup preview of the post. If the post\n        // hasn't yet been loaded, we will need to do that.\n        if (!visible) {\n          // Position the preview so that it appears above the mention.\n          // (The offsetParent should be .Post-body.)\n          const positionPreview = () => {\n            const previewHeight = $preview.outerHeight(true);\n            let offset = 0;\n\n            // If the preview goes off the top of the viewport, reposition it to\n            // be below the mention.\n            if ($this.offset().top - previewHeight < $(window).scrollTop() + $('#header').outerHeight()) {\n              offset += $this.outerHeight(true);\n            } else {\n              offset -= previewHeight;\n            }\n\n            $preview.show()\n              .css('top', $this.offset().top - $parentPost.offset().top + offset)\n              .css('left', $this.offsetParent().offset().left - $parentPost.offset().left)\n              .css('max-width', $this.offsetParent().width());\n          };\n\n          const showPost = post => {\n            const discussion = post.discussion();\n\n            m.render($preview[0], [\n              discussion !== parentPost.discussion()\n                ? <li><span className=\"PostMention-preview-discussion\">{discussion.title()}</span></li>\n                : '',\n              <li>{PostPreview.component({post})}</li>\n            ]);\n            positionPreview();\n          };\n\n          const post = app.store.getById('posts', id);\n          if (post && post.discussion()) {\n            showPost(post);\n          } else {\n            m.render($preview[0], LoadingIndicator.component());\n            app.store.find('posts', id).then(showPost);\n            positionPreview();\n          }\n\n          setTimeout(() => $preview.off('transitionend').addClass('in'));\n        }\n      };\n\n      const hidePreview = () => {\n        getPostElement().removeClass('pulsate');\n        if ($preview.hasClass('in')) {\n          $preview.removeClass('in').one('transitionend', () => $preview.hide());\n        }\n      };\n\n      $this.on('touchstart', e => e.preventDefault());\n\n      $this.add($preview).hover(\n        () => {\n          clearTimeout(timeout);\n          timeout = setTimeout(showPreview, 250);\n        },\n        () => {\n          clearTimeout(timeout);\n          getPostElement().removeClass('pulsate');\n          timeout = setTimeout(hidePreview, 250);\n        }\n      )\n        .on('touchend', e => {\n          showPreview();\n          e.stopPropagation();\n        });\n\n      $(document).on('touchend', hidePreview);\n    });\n  });\n}\n","import { extend } from 'flarum/extend';\nimport CommentPost from 'flarum/components/CommentPost';\n\nimport PostQuoteButton from './components/PostQuoteButton';\nimport selectedText from './utils/selectedText';\n\nexport default function addPostQuoteButton() {\n  extend(CommentPost.prototype, 'config', function(original, isInitialized) {\n    const post = this.props.post;\n\n    if (isInitialized || post.isHidden() || (app.session.user && !post.discussion().canReply())) return;\n\n    const $postBody = this.$('.Post-body');\n\n    // Wrap the quote button in a wrapper element so that we can render\n    // button into it.\n    const $container = $('<div class=\"Post-quoteButtonContainer\"></div>');\n\n    const handler = function(e) {\n      setTimeout(() => {\n        const content = selectedText($postBody);\n        if (content) {\n          const button = new PostQuoteButton({post, content});\n          m.render($container[0], button.render());\n\n          const rects = window.getSelection().getRangeAt(0).getClientRects();\n          const firstRect = rects[0];\n\n          if (e.clientY < firstRect.bottom && e.clientX - firstRect.right < firstRect.left - e.clientX) {\n            button.showStart(firstRect.left, firstRect.top);\n          } else {\n            const lastRect = rects[rects.length - 1];\n            button.showEnd(lastRect.right, lastRect.bottom);\n          }\n        }\n      }, 1);\n    };\n\n    this.$().after($container).on('mouseup', handler);\n\n    if ('ontouchstart' in window) {\n      document.addEventListener('selectionchange', handler, false);\n    }\n  });\n}\n","import { extend } from 'flarum/extend';\nimport Button from 'flarum/components/Button';\nimport CommentPost from 'flarum/components/CommentPost';\n\nimport reply from './utils/reply';\n\nexport default function () {\n  extend(CommentPost.prototype, 'actionItems', function (items) {\n\n    const post = this.props.post;\n\n    if (post.isHidden() || (app.session.user && !post.discussion().canReply())) return;\n\n    items.add('reply',\n      Button.component({\n        className: 'Button Button--link',\n        children: app.translator.trans('flarum-mentions.forum.post.reply_link'),\n        onclick: () => reply(post)\n      })\n    );\n  });\n}\n","import Component from 'flarum/Component';\n\nexport default class AutocompleteDropdown extends Component {\n  init() {\n    this.active = false;\n    this.index = 0;\n    this.keyWasJustPressed = false;\n  }\n\n  view() {\n    return (\n      <ul className=\"Dropdown-menu MentionsDropdown\">\n        {this.props.items.map(item => <li>{item}</li>)}\n      </ul>\n    );\n  }\n\n  show(left, top) {\n    this.$().show().css({\n      left: left + 'px',\n      top: top + 'px'\n    });\n    this.active = true;\n  }\n\n  hide() {\n    this.$().hide();\n    this.active = false;\n  }\n\n  navigate(delta) {\n    this.keyWasJustPressed = true;\n    this.setIndex(this.index + delta, true);\n    clearTimeout(this.keyWasJustPressedTimeout);\n    this.keyWasJustPressedTimeout = setTimeout(() => this.keyWasJustPressed = false, 500);\n  }\n\n  complete() {\n    this.$('li').eq(this.index).find('button').click();\n  }\n\n  setIndex(index, scrollToItem) {\n    if (this.keyWasJustPressed && !scrollToItem) return;\n\n    const $dropdown = this.$();\n    const $items = $dropdown.find('li');\n    let rangedIndex = index;\n\n    if (rangedIndex < 0) {\n      rangedIndex = $items.length - 1;\n    } else if (rangedIndex >= $items.length) {\n      rangedIndex = 0;\n    }\n\n    this.index = rangedIndex;\n\n    const $item = $items.removeClass('active').eq(rangedIndex).addClass('active');\n\n    if (scrollToItem) {\n      const dropdownScroll = $dropdown.scrollTop();\n      const dropdownTop = $dropdown.offset().top;\n      const dropdownBottom = dropdownTop + $dropdown.outerHeight();\n      const itemTop = $item.offset().top;\n      const itemBottom = itemTop + $item.outerHeight();\n\n      let scrollTop;\n      if (itemTop < dropdownTop) {\n        scrollTop = dropdownScroll - dropdownTop + itemTop - parseInt($dropdown.css('padding-top'), 10);\n      } else if (itemBottom > dropdownBottom) {\n        scrollTop = dropdownScroll - dropdownBottom + itemBottom + parseInt($dropdown.css('padding-bottom'), 10);\n      }\n\n      if (typeof scrollTop !== 'undefined') {\n        $dropdown.stop(true).animate({scrollTop}, 100);\n      }\n    }\n  }\n}\n","import PostsUserPage from 'flarum/components/PostsUserPage';\n\n/**\n * The `MentionsUserPage` component shows post which user Mentioned at\n */\nexport default class MentionsUserPage extends PostsUserPage {\n  /**\n   * Load a new page of the user's activity feed.\n   *\n   * @param {Integer} [offset] The position to start getting results from.\n   * @return {Promise}\n   * @protected\n   */\n  loadResults(offset) {\n    return app.store.find('posts', {\n      filter: {\n        type: 'comment',\n        mentioned: this.user.id()\n      },\n      page: {offset, limit: this.loadLimit},\n      sort: '-createdAt'\n    });\n  }\n}\n","import Notification from 'flarum/components/Notification';\nimport { truncate } from 'flarum/utils/string';\n\nexport default class PostMentionedNotification extends Notification {\n  icon() {\n    return 'fas fa-reply';\n  }\n\n  href() {\n    const notification = this.props.notification;\n    const post = notification.subject();\n    const content = notification.content();\n\n    return app.route.discussion(post.discussion(), content && content.replyNumber);\n  }\n\n  content() {\n    const notification = this.props.notification;\n    const user = notification.fromUser();\n\n    return app.translator.transChoice('flarum-mentions.forum.notifications.post_mentioned_text', 1, {user});\n  }\n\n  excerpt() {\n    return truncate(this.props.notification.subject().contentPlain(), 200);\n  }\n}\n","import Button from 'flarum/components/Button';\nimport extract from 'flarum/utils/extract';\n\nimport reply from '../utils/reply';\n\nexport default class PostQuoteButton extends Button {\n  view() {\n    const post = extract(this.props, 'post');\n    const content = extract(this.props, 'content');\n\n    this.props.className = 'Button PostQuoteButton';\n    this.props.icon = 'fas fa-quote-left';\n    this.props.children = app.translator.trans('flarum-mentions.forum.post.quote_button');\n    this.props.onclick = () => {\n      this.hide();\n      reply(post, content);\n    };\n    this.props.onmousedown = (e) => e.stopPropagation();\n\n    return super.view();\n  }\n\n  config(isInitialized) {\n    if (isInitialized) return;\n\n    $(document).on('mousedown', this.hide.bind(this));\n  }\n\n  show(left, top) {\n    const $this = this.$().show();\n    const parentOffset = $this.offsetParent().offset();\n\n    $this\n      .css('left', left - parentOffset.left)\n      .css('top', top - parentOffset.top);\n  }\n\n  showStart(left, top) {\n    const $this = this.$();\n\n    this.show(left, $(window).scrollTop() + top - $this.outerHeight() - 5);\n  }\n\n  showEnd(right, bottom) {\n    const $this = this.$();\n\n    this.show(right - $this.outerWidth(), $(window).scrollTop() + bottom + 5);\n  }\n\n  hide() {\n    this.$().hide();\n  }\n}\n","import Notification from 'flarum/components/Notification';\nimport { truncate } from 'flarum/utils/string';\n\nexport default class UserMentionedNotification extends Notification {\n  icon() {\n    return 'fas fa-at';\n  }\n\n  href() {\n    const post = this.props.notification.subject();\n\n    return app.route.discussion(post.discussion(), post.number());\n  }\n\n  content() {\n    const user = this.props.notification.fromUser();\n\n    return app.translator.trans('flarum-mentions.forum.notifications.user_mentioned_text', {user});\n  }\n\n  excerpt() {\n    return truncate(this.props.notification.subject().contentPlain(), 200);\n  }\n}\n","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport NotificationGrid from 'flarum/components/NotificationGrid';\nimport { getPlainContent } from 'flarum/utils/string';\n\nimport addPostMentionPreviews from './addPostMentionPreviews';\nimport addMentionedByList from './addMentionedByList';\nimport addPostReplyAction from './addPostReplyAction';\nimport addPostQuoteButton from './addPostQuoteButton';\nimport addComposerAutocomplete from './addComposerAutocomplete';\nimport PostMentionedNotification from './components/PostMentionedNotification';\nimport UserMentionedNotification from './components/UserMentionedNotification';\nimport UserPage from 'flarum/components/UserPage'\nimport LinkButton from 'flarum/components/LinkButton';\nimport MentionsUserPage from './components/MentionsUserPage';\n\napp.initializers.add('flarum-mentions', function() {\n  // For every mention of a post inside a post's content, set up a hover handler\n  // that shows a preview of the mentioned post.\n  addPostMentionPreviews();\n\n  // In the footer of each post, show information about who has replied (i.e.\n  // who the post has been mentioned by).\n  addMentionedByList();\n\n  // Add a 'reply' control to the footer of each post. When clicked, it will\n  // open up the composer and add a post mention to its contents.\n  addPostReplyAction();\n\n  // Show a Quote button when Post text is selected\n  addPostQuoteButton();\n\n  // After typing '@' in the composer, show a dropdown suggesting a bunch of\n  // posts or users that the user could mention.\n  addComposerAutocomplete();\n\n  app.notificationComponents.postMentioned = PostMentionedNotification;\n  app.notificationComponents.userMentioned = UserMentionedNotification;\n\n  // Add notification preferences.\n  extend(NotificationGrid.prototype, 'notificationTypes', function(items) {\n    items.add('postMentioned', {\n      name: 'postMentioned',\n      icon: 'fas fa-reply',\n      label: app.translator.trans('flarum-mentions.forum.settings.notify_post_mentioned_label')\n    });\n\n    items.add('userMentioned', {\n      name: 'userMentioned',\n      icon: 'fas fa-at',\n      label: app.translator.trans('flarum-mentions.forum.settings.notify_user_mentioned_label')\n    });\n  });\n\n  // Add mentions tab in user profile\n  app.routes['user.mentions'] = {path: '/u/:username/mentions', component: MentionsUserPage.component()};\n  extend(UserPage.prototype, 'navItems', function(items) {\n    const user = this.user;\n    items.add('mentions',\n      LinkButton.component({\n        href: app.route('user.mentions', {username: user.username()}),\n        name: 'mentions',\n        children: [app.translator.trans('flarum-mentions.forum.user.mentions_link')],\n        icon: 'fas fa-at'\n      }),\n      80\n    );\n  });\n\n  // Remove post mentions when rendering post previews.\n  getPlainContent.removeSelectors.push('a.PostMention');\n});\n\nexport * from './utils/textFormatter';\n","import DiscussionControls from 'flarum/utils/DiscussionControls';\n\nfunction insertMention(post, component, quote) {\n  const user = post.user();\n  const mention = '@' + (user ? user.username() : post.number()) + '#' + post.id();\n\n  // If the composer is empty, then assume we're starting a new reply.\n  // In which case we don't want the user to have to confirm if they\n  // close the composer straight away.\n  if (!component.content()) {\n    component.props.originalContent = mention;\n  }\n\n  const cursorPosition = component.editor.getSelectionRange()[0];\n  const preceding = component.editor.value().slice(0, cursorPosition);\n  const precedingNewlines = preceding.length == 0 ? 0 : 3 - preceding.match(/(\\n{0,2})$/)[0].length;\n\n  component.editor.insertAtCursor(\n    Array(precedingNewlines).join('\\n') + // Insert up to two newlines, depending on preceding whitespace\n    (quote\n      ? '[quote author=\"' + mention + '\"]' + quote.trim().replace(/\\n/g, '\\n> ') + '[/quote]\\n\\n'\n      : mention)\n  );\n}\n\nexport default function reply(post, quote) {\n  const component = app.composer.component;\n  if (component && component.props.post && component.props.post.discussion() === post.discussion()) {\n    insertMention(post, component, quote);\n  } else {\n    DiscussionControls.replyAction.call(post.discussion())\n      .then(newComponent => insertMention(post, newComponent, quote));\n  }\n}\n","export default function selectedText(body) {\n  const selection = window.getSelection();\n  if (selection.rangeCount) {\n    const range = selection.getRangeAt(0);\n    const parent = range.commonAncestorContainer;\n    if (body[0] === parent || $.contains(body[0], parent)) {\n      const clone = $(\"<div>\").append(range.cloneContents());\n\n      // Replace emoji images with their shortcode (found in alt attribute)\n      clone.find('img.emoji').replaceWith(function() {\n        return this.alt;\n      });\n\n      // Replace all other images with a Markdown image\n      clone.find('img').replaceWith(function() {\n        return '![](' + this.src + ')';\n      });\n\n      // Replace all links with a Markdown link\n      clone.find('a').replaceWith(function() {\n        return '[' + this.innerText + '](' + this.href + ')';\n      });\n\n      return clone.text();\n    }\n  }\n  return \"\";\n}\n","import username from 'flarum/helpers/username';\nimport extractText from 'flarum/utils/extractText';\n\nexport function filterUserMentions(tag) {\n  const user = app.store.getBy('users', 'username', tag.getAttribute('username'));\n\n  if (user) {\n    tag.setAttribute('id', user.id());\n    tag.setAttribute('displayname', extractText(username(user)));\n\n    return true;\n  }\n}\n\nexport function filterPostMentions(tag) {\n  const post = app.store.getById('posts', tag.getAttribute('id'));\n\n  if (post) {\n    tag.setAttribute('discussionid', post.discussion().id());\n    tag.setAttribute('number', post.number());\n    tag.setAttribute('displayname', extractText(username(post.user())));\n\n    return true;\n  }\n}\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/ComposerBody'];","module.exports = flarum.core.compat['components/LinkButton'];","module.exports = flarum.core.compat['components/LoadingIndicator'];","module.exports = flarum.core.compat['components/Notification'];","module.exports = flarum.core.compat['components/NotificationGrid'];","module.exports = flarum.core.compat['components/PostPreview'];","module.exports = flarum.core.compat['components/PostsUserPage'];","module.exports = flarum.core.compat['components/TextEditor'];","module.exports = flarum.core.compat['components/TextEditorButton'];","module.exports = flarum.core.compat['components/UserPage'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/highlight'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['helpers/punctuateSeries'];","module.exports = flarum.core.compat['helpers/username'];","module.exports = flarum.core.compat['models/Post'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['utils/KeyboardNavigatable'];","module.exports = flarum.core.compat['utils/extract'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['utils/string'];"],"sourceRoot":""}